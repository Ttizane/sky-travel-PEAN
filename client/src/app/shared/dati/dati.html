<!-- Header -->
<div class="text-center mb-8">
  <h2 class="text-2xl font-bold text-blue-900 mb-2">Completa il tuo profilo</h2>
  <p class="text-blue-600">Inserisci le tue informazioni personali per completare la registrazione</p>
</div>

<!-- Info Form -->
<form (ngSubmit)="onSubmit()" class="space-y-6">
    <!-- Nome e Cognome -->
    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
      <!-- Nome Field -->
      <div class="form-control">
        <label class="label">
          <span class="label-text text-blue-800 font-semibold">Nome *</span>
        </label>
        <div class="relative">
          <input 
            type="text" 
            [(ngModel)]="nome"
            name="nome"
            placeholder="Mario"
            class="input w-full bg-white/80 backdrop-blur-sm border-2 border-blue-200 focus:border-blue-400 hover:border-blue-300 rounded-xl focus:outline-none text-blue-800 placeholder-blue-400"
            required
          />
        </div>
      </div>

      <!-- Cognome Field -->
      <div class="form-control">
        <label class="label">
          <span class="label-text text-blue-800 font-semibold">Cognome *</span>
        </label>
        <div class="relative">
          <input 
            type="text" 
            [(ngModel)]="cognome"
            name="cognome"
            placeholder="Rossi"
            class="input w-full bg-white/80 backdrop-blur-sm border-2 border-blue-200 focus:border-blue-400 hover:border-blue-300 rounded-xl focus:outline-none text-blue-800 placeholder-blue-400"
            required
          />
        </div>
      </div>
    </div>

    <!-- Codice Fiscale Field -->
    <div class="form-control">
      <label class="label">
        <span class="label-text text-blue-800 font-semibold">Codice Fiscale *</span>
      </label>
      <div class="relative">
        <input 
          type="text" 
          [(ngModel)]="codiceFiscale"
          name="codiceFiscale"
          placeholder="RSSMRA85M15H501Z"
          maxlength="16"
          class="input w-full bg-white/80 backdrop-blur-sm border-2 border-blue-200 focus:border-blue-400 hover:border-blue-300 rounded-xl focus:outline-none text-blue-800 placeholder-blue-400 uppercase"
          required
        />
      </div>
      <label class="label">
        <span class="label-text-alt text-blue-500">Il codice fiscale deve essere di 16 caratteri</span>
      </label>
    </div>

    <!-- Data di Nascita e Sesso -->
    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
      <!-- Data di Nascita Field -->
      <div class="form-control">
        <label class="label">
          <span class="label-text text-blue-800 font-semibold">Data di Nascita *</span>
        </label>
        <div class="relative">
          <input 
            type="date" 
            [(ngModel)]="dataNascita"
            name="dataNascita"
            class="input w-full bg-white/80 backdrop-blur-sm border-2 border-blue-200 focus:border-blue-400 hover:border-blue-300 rounded-xl focus:outline-none text-blue-800"
            required
          />
        </div>
      </div>

      <!-- Sesso Field -->
      <div class="form-control">
        <label class="label">
          <span class="label-text text-blue-800 font-semibold">Sesso *</span>
        </label>
        <div class="relative">
          <select 
            [(ngModel)]="sesso"
            name="sesso"
            class="select w-full bg-white/80 backdrop-blur-sm border-2 border-blue-200 focus:border-blue-400 hover:border-blue-300 rounded-xl focus:outline-none text-blue-800"
            required
          >
            <option value="" disabled selected>Seleziona sesso</option>
            <option value="M">Maschio</option>
            <option value="F">Femmina</option>
          </select>
        </div>
      </div>
    </div>

    <!-- Email Field (readonly - viene dalla registrazione) -->
    <div class="form-control">
      <label class="label">
        <span class="label-text text-blue-800 font-semibold">Email</span>
      </label>
      <div class="relative">
        <input 
          type="email" 
          [(ngModel)]="email"
          name="email"
          class="input w-full bg-gray-100/80 backdrop-blur-sm border-2 border-gray-300 rounded-xl focus:outline-none text-gray-600 cursor-not-allowed"
          readonly
        />
        <div class="absolute inset-y-0 right-0 pr-3 flex items-center">
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-5 text-gray-400">
            <path stroke-linecap="round" stroke-linejoin="round" d="M16.5 10.5V6.75a4.5 4.5 0 1 0-9 0v3.75m-.75 11.25h10.5a2.25 2.25 0 0 0 2.25-2.25v-6.75a2.25 2.25 0 0 0-2.25-2.25H6.75a2.25 2.25 0 0 0-2.25 2.25v6.75a2.25 2.25 0 0 0 2.25 2.25Z" />
          </svg>
        </div>
      </div>
      <label class="label">
        <span class="label-text-alt text-gray-500">Email confermata durante la registrazione</span>
      </label>
    </div>

    <!-- Error Message -->
    @if (errorMessage) {
      <div class="alert alert-error shadow-lg rounded-xl border-red-200">
        <svg xmlns="http://www.w3.org/2000/svg" class="stroke-current shrink-0 h-6 w-6" fill="none" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z" />
        </svg>
        <span>{{ errorMessage }}</span>
      </div>
    }

    <!-- Success Message -->
    @if (successMessage) {
      <div class="alert alert-success shadow-lg rounded-xl border-green-200">
        <svg xmlns="http://www.w3.org/2000/svg" class="stroke-current shrink-0 h-6 w-6" fill="none" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
        </svg>
        <span>{{ successMessage }}</span>
      </div>
    }

    <!-- Privacy Notice -->
    <div class="bg-blue-50/80 backdrop-blur-sm border border-blue-200 rounded-xl p-4">
      <div class="flex items-start gap-3">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6 text-blue-600 flex-shrink-0 mt-0.5">
          <path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75 11.25 15 15 9.75m-3-7.036A11.959 11.959 0 0 1 3.598 6 11.99 11.99 0 0 0 3 9.749c0 5.592 3.824 10.29 9 11.623 5.176-1.332 9-6.03 9-11.623 0-1.31-.21-2.571-.598-3.751h-.152c-3.196 0-6.1-1.248-8.25-3.285Z" />
        </svg>
        <div class="text-sm text-blue-700">
          <p class="font-semibold mb-1">Protezione dei tuoi dati</p>
          <p>Le tue informazioni personali sono protette e utilizzate esclusivamente per migliorare la tua esperienza di viaggio. Non condivideremo mai i tuoi dati con terze parti senza il tuo consenso esplicito.</p>
        </div>
      </div>
    </div>

    <!-- Submit Button -->
    <button 
      type="submit"
      [disabled]="!isFormValid || isLoading"
      class="w-full btn bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 disabled:from-gray-400 disabled:to-gray-500 text-white border-none py-4 rounded-xl font-semibold text-lg shadow-lg"
    >
      @if (!isLoading) {
        <span class="flex items-center justify-center">
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6 mr-2">
            <path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z" />
          </svg>
          Completa Profilo
        </span>
      } @else {
        <span class="flex items-center justify-center">
          <div class="loading loading-spinner loading-sm mr-2"></div>
          Salvataggio in corso...
        </span>
      }
    </button>
</form>
